\chapter{More functoriality and vector bundles}
\begin{center}
	{\huge Speaker: Francesco Minnocci}
\end{center}
\bigskip

\noindent
The main references for this chapter are \cite{fulton1984intersection} and \cite{eisenbud20163264}. 



\section{Pullback}

Let $f:X\to Y$ be a morphism. In the last chapter we managed to construct a pushforward when $f$ is proper. Our first goal in this chapter is to construct a pullback, at least in some cases.


To be more concrete, we want a map $Z(Y)\to Z(X)$ which preserves rational equivalence (so it induces a map at the level of Chow groups) and the intersection product.

\subsection{Divisors and rational equivalence}
\begin{definition}[]
Let $V\subseteq X$ be a subvariety and $f\in k(X)^\ast$. We define the \textbf{order} of $f$ along $V$ to be
\[\ord_Vf:=\length_{\Oc_{X,\xi}}(\Oc_{X,\xi}/(f))\]
where $\xi$ is the generic point of $V$.
\end{definition}


\begin{definition}[]
Let $f\in k(X)^\ast$, we define its \textbf{associated divisor} to be
\[[\mathrm{div} f]=\sum_V\ord_V(f)[V].\]
\end{definition}


\begin{proposition}[]
A cycle $\al\in Z^k(X)$ is rationally equivalent to $0$ if and only if there exists a finite number of varieties $W_i$ together with proper morphisms $p_i:W_i\to X$ and rational functions $f_i\in k(W_i)^\ast$ such that $\al=\sum (p_i)_\ast[\mathrm{div}(f_i)]$.
\end{proposition}

\subsection{Regular immersions}
\begin{definition}[]
A \textbf{regular immersion} of codimension $r$ is a locally closed immersion given locally by a quotient of an ideal which is generated by a regular sequence.
\end{definition}

\begin{notation}
In this chapter, when we say flat we also mean that all fibers should the same dimension. 
\end{notation}

\begin{fact}[]
If $Y$ is smooth then we can factor any morphism $f:X\to Y$ as
% https://q.uiver.app/#q=WzAsMyxbMCwwLCJYIl0sWzEsMCwiWSJdLFsxLDEsIlhcXHRpbWVzIFkiXSxbMCwxLCJmIl0sWzIsMSwiXFxwcl8yIiwyXSxbMCwyLCJcXEdhbW1hX2YiLDJdXQ==
\[\begin{tikzcd}
	X & Y \\
	& {X\times Y}
	\arrow["f", from=1-1, to=1-2]
	\arrow["{\Gamma_f}"', from=1-1, to=2-2]
	\arrow["{\pr_2}"', from=2-2, to=1-2]
\end{tikzcd}\]
where $\Gamma_f$ is the graph-morphism, which is a regular immersion, and $\pr_2$ is the projection on the second factor, which is flat. 
\end{fact}

This shows that, for $Y$ smooth, we may construct pullbacks by only considering morphisms which are regular immersions or flat.

\begin{theorem}[]
If $i$ is a regular immersion then $i^\ast$ exists.
\end{theorem}

\begin{remark}
If pullbacks exist for $X$ smooth, and $\Delta:X\to X\times X$ is a regular immersion then, if $V,W\subseteq X$ are subvarieties, we want
\[[V][W]=\Delta^\ast([V\times W]),\]
that is, we want the product $[V][W]$ to correspond to ``the points of $X$ which under the diagonal map to pairs in $V\times W$", i.e. the intersection.
\end{remark}

\subsection{Flat pullback}
\begin{theorem}[]
If $f$ is flat and $V\subseteq X$ is a subvariety, the function
\[f^\ast([V])=[f\ii(V)]\]
is a homomorphism $Z(Y)\to Z(X)$ of degree $n$ (if we grade cycles by dimension).
\end{theorem}



\begin{proposition}[]
Suppose we have a cartesian square
% https://q.uiver.app/#q=WzAsNCxbMSwwLCJYIl0sWzEsMSwiWSJdLFswLDEsIlknIl0sWzAsMCwiWCciXSxbMCwxLCJmIl0sWzMsMiwiZiciLDJdLFsyLDEsImciLDJdLFszLDAsImcnIl1d
\[\begin{tikzcd}
	{X'} & X \\
	{Y'} & Y
	\arrow["{g'}", from=1-1, to=1-2]
	\arrow["{f'}"', from=1-1, to=2-1]
	\arrow["f", from=1-2, to=2-2]
	\arrow["g"', from=2-1, to=2-2]
\end{tikzcd}\]
with $f$ proper and $g$ flat, then for all $\al\in Z(X)$
\[f_\ast'g'^\ast(\al)=g^\ast f_\ast(\al).\]
\end{proposition}


\begin{proposition}[]
Let $\al\in Z^k(Y)$ be an element of $\Rat(Y)$, then $f^\ast\al\sim 0$.
\end{proposition}
\begin{proof}
Without loss of generality, we may assume $\al=[\Phi(0)]-[\Phi(\infty)]$ where $\Phi(t)=\Phi\cap \cpa{t}\times Y$ for $\Phi\subseteq \Pj^1\times Y$ closed and $t\in \Pj^1(k)$.
Consider the base change diagram
% https://q.uiver.app/#q=WzAsNyxbMCwzLCJYIl0sWzEsMywiWSJdLFsxLDIsIlxcUGpeMVxcdGltZXMgWSJdLFswLDIsIlxcUGpeMVxcdGltZXMgWCJdLFsyLDAsIlxcUGpeMSJdLFswLDEsIlciXSxbMSwxLCJcXFBoaSJdLFswLDEsImYiXSxbMywyLCIoaWQsZikiXSxbMiwxLCJxIl0sWzMsMCwicCIsMl0sWzIsNCwiZyJdLFs1LDZdLFs2LDIsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Imhvb2siLCJzaWRlIjoidG9wIn19fV0sWzUsMywiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoiaG9vayIsInNpZGUiOiJ0b3AifX19XSxbNSw0LCJoIl1d
\[\begin{tikzcd}
	&& {\Pj^1} \\
	W & \Phi \\
	{\Pj^1\times X} & {\Pj^1\times Y} \\
	X & Y
	\arrow["h", from=2-1, to=1-3]
	\arrow[from=2-1, to=2-2]
	\arrow[hook, from=2-1, to=3-1]
	\arrow[hook, from=2-2, to=3-2]
	\arrow["{(id,f)}", from=3-1, to=3-2]
	\arrow["p"', from=3-1, to=4-1]
	\arrow["g", from=3-2, to=1-3]
	\arrow["q", from=3-2, to=4-2]
	\arrow["f", from=4-1, to=4-2]
\end{tikzcd}\]
where $W=((id, f))\ii(\Phi)$ and $p,q,g,h$ are the appropriate projections.
\begin{align*}
f^\ast(\al)=&f^\ast([\Phi(0)]-[\Phi(\infty)])=f^\ast q_\ast([g\ii(0)]-[g\ii(\infty)])=\\
=&p_\ast((id, f))^\ast([g\ii(0)]-[g\ii(\infty)])=\\
=&p_\ast([h\ii(0)]-[h\ii(\infty)]).
\end{align*}
If $W=\bigcup W_i$ with $W_i$ irreducible, we may write $[W]=\sum m_i[W_i]$ for appropriate $m_i\in\Z$. Note that if $h_i=h\res{W_i}$ then
\[[h\ii(t)]=\sum m_i h_i\ii(t).\]
Since
\[[h_i\ii(0)]-[h_i\ii(\infty)]=[\mathrm{div}(h_i)]\]
this shows that
\[f^\ast(\al)=\sum m_i p_\ast[\mathrm{div}(h_i)]\sim 0.\]
\end{proof}


\begin{corollary}[]
We have a well defined group homomorphism $f^\ast:CH(Y)\to CH(X)$.
\end{corollary}

\begin{remark}
Since $f\ii(A\cap B)=f\ii(A)\cap f\ii(B)$, $f^\ast$ is also a ring homomorphism.
\end{remark}


\begin{remark}
The pullback $f^\ast:CH(Y)\to CH(X)$ induces a $CH(Y)$-module structure on $CH(X)$.
\end{remark}



\begin{proposition}[]
If $f$ is flat and proper then $f_\ast$ is a homomorphism of $CH(Y)$-modules, i.e.
\[f_\ast(f^\ast(\beta)\cdot \al)=\beta\cdot f_\ast(\al)\]
\end{proposition}


\begin{remark}
Plugging in $\al=1_{CH(X)}=[X]$ we have that $f_\ast f^\ast(\beta)=(\deg f)\beta$.
\end{remark}















\section{Chern classes}
We now move on to one of the first applications of the Chow ring: giving vector bundles their associated Chern classes.

\subsection{Brief review of vector bundles}
\begin{definition}[]
$\Ec$ is a \textbf{vector bundle} if it is a locally free sheaf of $\Oc_X$-modules of some finite rank $r$.
\end{definition}

\begin{remark}
Vector bundles of rank 1 are called \textbf{line bundles}.
\end{remark}

\begin{definition}[]
The \textbf{dual}\footnote{also called \textbf{inverse} in the case of line bundles.} of a vector bundle $\Ec$ is $\Ec^\vee=\Hom(\Ec,\Oc_X)$.
\end{definition}

\begin{definition}[]
An \textbf{algebraic vector bundle} is a morphism $p:E\to X$ of schemes such that for all $x\in X$ there exists $U$ neighborhood of $x$ such that $f\ii(U)\cong \A^r\times U$ and the transition maps are linear fiber-wise.
\end{definition}

\begin{remark}
We have a correspondence between the two notions given by sending a locally free sheaf $\Ec$ to 
\[\ul{\Spec}_{\Oc_X}(\ul{\Sym}_{\Oc_X}(\Ec^\vee)).\]
We can also construct a projective version of bundles by taking
\[\Pj(\Ec)=\ul{\Proj}_{\Oc_X}(\ul{\Sym}_{\Oc_X}(\Ec^\vee)).\]
\end{remark}




\subsection{First Chern class of a line bundle}

Recall that we are taking $X$ to be smooth and noetherian, so in particular also irreducible and has a generic point $\xi$. It follows that non-empty open subsets of $X$ are dense.


\begin{definition}[]
Let $L$ be a line bundle on $X$, then a \textbf{rational section} of $L$ is a germ $f\in L_\xi\cong\Oc_{X,\xi}=k(X)$.
\end{definition}


\begin{remark}
A nonzero rational section $\sigma$ exists because $L_\xi\cong k(X)^\ast\neq \emptyset$. 
\end{remark}

\begin{proposition}[]
A nonzero rational section determines a divisor on $X$. Moreover, all divisors obtained this way are rationally equivalent.
\end{proposition}
\begin{proof}
Let $\cpa{U_i}$ be a trivializing open cover for $L$ and let us fix isomorphisms $\vp_i:L_{U_i}\cong \Oc_{U_i}$. Set $f_i=(\vp_i)_\xi(\sigma)$. This allows us to construct divisors $\mathrm{div}(f_i)$ on each $U_i$. On the intersections $U_{ij}$ both of the divisors we got separately on $U_i$ and $U_j$ agree because the automorphism of $\Oc(U_{ij})$ induced by the equality $L_{U_{i}}\res{U_{ij}}=L_{U_j}\res{U_{ij}}$ must be multiplication by an invertible element of $g_{ij}\in \Oc(U_{ij})^\ast$ (that is, $f_j\res{U_{ij}}=g_{ij}f_j\res{U_ij}$) and therefore
\[\mathrm{div}(f_j)\res{U_{ij}}=\cancelto{0}{\mathrm{div}(g_{ij})}+\mathrm{div}(f_i)\res{U_{ij}}.\]
Changing the isomorphisms $L_{U_i}\cong \Oc_{U_i}$ does not change the associated divisor for similar reasons.

Let us call this divisor $\mathrm{div}(\sigma)$.
Since $L_\xi\cong k(X)$, it follows that two different nonzero rational sections $\sigma$ and $\tau$ must determine a rational function $f=\sigma/\tau\in k(X)^\ast$. It follows that
\[\mathrm{div}(\sigma)=\mathrm{div}(f)+\mathrm{div}(\tau),\]
that is, $\mathrm{div}(\sigma)\sim \mathrm{div}(\tau)$.
\end{proof}

\begin{definition}[]
We define $c_1(L)$ to be the class in $CH^1(X)$ of any divisor associated to a nonzero rational section of $L$.
\end{definition}

\begin{example}
Let $X=\Pj^n$, $L=\Oc(d)$ with $d\geq 0$. Then $c_1(L)=[H]=d[h]$ where $h$ is a hyperplane (because $H$ is a degree $d$ hypersurface). This comes from the fact that global sections of $\Oc(d)$ are homogeneous polynomials of degree $d$.
\end{example}

\begin{proposition}[]
If $X$ is smooth, $c_1:\Pic(X)\to CH^1(X)$ is an isomorphism. 

In particular, if $\sigma,\ \sigma'$ are rational sections of $L$ and $L'$ respectively, the rational section $\sigma\otimes \sigma'$ of $L\otimes L'$ behaves as follows: 
\[\mathrm{div}(f\otimes f')=\mathrm{div}(f)+\mathrm{div(f')}.\]
\end{proposition}


\subsection{Axiomatic definition of Chern classes}
There is another definition of $c_1$ which works for all vector bundles (and yields as many classes as the rank of the bundle itself). 

\begin{theorem}[]
If $\Ec$ is a rank $r$ vector bundle on $X$ then
$CH^\bullet(\Pj(\Ec))$ is a free $CH^\bullet(X)$-module of rank $r$. 

Moreover, if $L=\Oc_{\Pj(\Ec)}(1)$ and $h=c_1(L)\in CH^1(\Pj(\Ec))$, then $\cpa{1,\cdots, h^{r-1}}$ is a basis of $CH^\bullet(\Pj(\Ec))$ and the only relation is of the form
\[h^r+c_1(\Ec)h^{r-1}+\cdots+c_r(\Ec)=0\]
for some unique $c_i(\Ec)\in CH^i(X)$.
\end{theorem}

\begin{remark}
This is a generalization of the fact that $CH(\Pj^n)\cong \Z[x]/(x^{n+1})$ for $x$ hyperplane.
\end{remark}


\begin{example}
Let $\Ec=L$ be a line bundle and $\pi:\Pj(L)\to X$ be its projectivization. Note that\footnote{$\pi^\ast L$ is the tautological bundle of $\Pj(\Ec)$} $\Oc_{\Pj(L)}(1)=\pi^\ast L^\vee$. 
Let $h=c_1(\pi^\ast L^\vee)=-\pi^\ast c_1(L)=-c_1(L)[\Pj(L)]$ be the generator of the Chow group. With the new definition of $c_1$ we got in the previous theorem (which we now denote $\wt c_1$ to avoid confusion) we have
\[h^1+\wt c_1(L)h^0=0\implies h=-\wt c_1(L)[\Pj(L)]\]
so indeed the two definitions of $c_1$ coincide for line bundles.
\end{example}



\begin{definition}[]
We define the \textbf{total Chern class} of $\Ec$ to be
\[c(\Ec)=\sum_{i=0}^rc_i(\Ec)\]
\end{definition}

\begin{proposition}[]
The following hold
\begin{itemize}
\item If $f$ is flat, $f^\ast(c(\Ec))=c(f^\ast(\Ec))$
\item If we have an exact sequence $0\to \Ec\to \Fc\to \Gc\to 0$ of vector bundles then
\[c(\Fc)=c(\Ec)c(\Gc),\]
i.e.
\[c_k(\Fc)=\sum_{i+j=k}c_i(\Ec)c_j(\Gc)\]
Moreover, in the case of a split exact sequence we have $c(\Ec\oplus \Gc)=c(\Ec)c(\Gc)$.
\end{itemize}
\end{proposition}

\subsection{Splitting principle}

\begin{theorem}[Splitting principle]
If $E\to X$ vector bundle of rank $n$ then there exists $\vp:Y\to X$ smooth such that 
\begin{enumerate}
    \item $\vp^\ast:CH(Y)\to CH(X)$ is injective
    \item $\vp^\ast E\to Y$ has a filtration
    \[0=E_0\subsetneq E_1\subsetneq\cdots, \subseteq E_n=\vp^\ast E\]
    with $E_i/E_{i+1}$ locally free of rank $1$.
\end{enumerate}	
\end{theorem}


\begin{corollary}[]
We have that
\[\vp^\ast c(E)=c(\vp^\ast E)=\prod_{i=0}^{n-1} c(E_i/E_{i+1})\]
\end{corollary}

\begin{example}
If $E=\bigoplus_{i=1}^r L_i$ and $\al_i=c_1(L_i)$ then
\[c(E)=\prod_{i=1}^r(1+\al_i),\quad c(E^\vee)=\prod_{i=1}^r(1-\al_i),\quad c_k(E^\vee)=(-1)^kc_k(E)\]
\end{example}


\begin{definition}[]
If $\Ec$ is a vector bundle of rank $r$, $\det \Ec=\bigwedge^r\Ec$.
\end{definition}

\begin{proposition}[]
$c_1(E)=c_1(\det E)$.
\end{proposition}
\begin{proof}[Idea.]
If $E=\bigoplus L_i$ then $c_1(E)=\sum c_1(L_i)=c_1(\bigotimes L_i)=c_1(\det(\bigotimes L_i))$. The general case follows from this combined with the splitting principle.
\end{proof}














